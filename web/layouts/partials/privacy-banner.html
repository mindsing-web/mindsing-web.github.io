<div id="privacy-banner" class="fixed bottom-0 left-0 w-100 pa3 bg-black-80 white z-999" style="display: none;">
  <div class="center mw8 flex flex-wrap items-center justify-between">
    <div class="w-100 w-two-thirds-ns pr3-ns">
      <p class="ma0">
        This website uses cookies to ensure you get the best experience.
        <a href="/privacy-policy/" class="link white underline">Learn more</a> about our privacy practices.
      </p>
    </div>
    <div class="w-100 w-third-ns mt2 mt0-ns tr-ns">
      <!-- Reject link (shown in both modes) -->
      <a id="reject-privacy" class="link white underline mr3 pointer">
        Reject All
      </a>
      <!-- Accept button (only shown in explicit mode) -->
      <button id="accept-privacy" class="ba b--white-40 bg-transparent white pv2 ph3 pointer hover-bg-white-20 br2">
        Accept
      </button>
      <!-- Acknowledge button (only shown in auto mode) -->
      <button id="acknowledge-privacy" class="ba b--white-40 bg-transparent white pv2 ph3 pointer hover-bg-white-20 br2">
        Acknowledge
      </button>
    </div>
  </div>
</div>

{{/* Load afterLoad.js first since it creates events that user-settings.js listens for */}}
{{ with resources.Get "js/afterLoad.js" }}
  {{ $afterLoadJs := . }}
  {{ if hugo.IsProduction }}
    {{ $afterLoadJs = $afterLoadJs | minify | fingerprint }}
  {{ end }}
  <script src="{{ $afterLoadJs.RelPermalink }}"></script>
{{ else }}
  <!-- Fallback if resource isn't found -->
  <script src="/js/afterLoad.js"></script>
{{ end }}

{{/* Then load the privacy banner JavaScript */}}
{{ with resources.Get "js/user-settings.js" }}
  {{ $js := . }}
  {{ if hugo.IsProduction }}
    {{ $js = $js | minify | fingerprint }}
  {{ end }}
  <script src="{{ $js.RelPermalink }}"></script>
{{ else }}
  <!-- Fallback if resource isn't found -->
  <script src="/js/user-settings.js"></script>
{{ end }}

{{/* Load tracking module for GA4 events (after privacy scripts) */}}
{{ with resources.Get "js/tracking.js" }}
  {{ $tracking := . }}
  {{ if hugo.IsProduction }}
    {{ $tracking = $tracking | minify | fingerprint }}
  {{ end }}
  <script src="{{ $tracking.RelPermalink }}"></script>
{{ else }}
  <!-- Fallback if resource isn't found -->
  <script src="/js/tracking.js"></script>
{{ end }}

{{/* Load general page tracking for non-calculator pages */}}
{{ with resources.Get "js/page-tracking.js" }}
  {{ $pageTracking := . }}
  {{ if hugo.IsProduction }}
    {{ $pageTracking = $pageTracking | minify | fingerprint }}
  {{ end }}
  <script src="{{ $pageTracking.RelPermalink }}"></script>
{{ else }}
  <!-- Fallback if resource isn't found -->
  <script src="/js/page-tracking.js"></script>
{{ end }}
