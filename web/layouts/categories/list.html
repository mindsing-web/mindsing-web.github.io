{{ define "header" }}
  {{ partial "page-header.html" . }}
{{ end }}

{{ define "main" }}
  <div class="center ph3 ph5-l">
    {{/* Category Sub-Navigation */}}
    <nav class="category-nav mw9 center mt4 mb4 overflow-x-auto" aria-label="Blog Categories">
      <ul class="list flex flex-wrap justify-center ma0 pa0">
        <li class="ma2">
          <a href="/blog/" class="link dim ph3 pv2 ba b--moon-gray br2 dib bg-white dark-gray">
            All Posts
          </a>
        </li>
        {{/* Get categories from section pages (the _index.md files in each category folder) */}}
        {{ range where .Site.Pages "Section" "blog" }}
          {{ if and (eq .Kind "section") (ne .RelPermalink "/blog/") }}
            <li class="ma2">
              <a href="{{ .Permalink }}" class="link dim ph3 pv2 ba b--moon-gray br2 dib bg-white dark-gray">
                {{ .Title }}
              </a>
            </li>
          {{ end }}
        {{ end }}
      </ul>
    </nav>

    {{/* Category Title */}}
    <div class="mw9 center mb4">
      <h1 class="f2 f1-l athelas">{{ .Title }}</h1>
      {{ with .Description }}
        <p class="f4 lh-copy mid-gray">{{ . }}</p>
      {{ end }}
    </div>

    {{/* Blog Posts Grid */}}
    <article class="nested-copy-line-height nested-img">
      <section class="w-100 mw9 center">
        <div class="flex-ns flex-wrap justify-start">
          {{ range .Pages }}
            <div class="relative w-100 w-50-l pr4-l mb4 bg-white">
              {{- partial "summary.html" . -}}
            </div>
          {{ end }}
        </div>
      </section>

      {{ if gt .Paginator.TotalPages 1 }}
        {{- template "_internal/pagination.html" . -}}
      {{ end }}
    </article>
  </div>
{{ end }}
